var lemonUtils = require("lemon_utils");
var lemonDatabasePG = require("./pg.js");

module.exports.Connection = function(options, callback)
{
	if(!options || !options.engine)
	{
		throw new Error("There are not options all engine");
	}
	callback = callback || function()
	{
	};
	switch(options.engine)
	{
		case "pg":
		{
			this.options = lemonUtils.objectDefaults(options, {
				"host": "localhost",
				"port": 5433,
				"user": "postgres",
				"password": "123456",
				"database": "!!!Database name is required"
			}, function()
			{
				callback(error);
			});
			this.__proto__ = lemonDatabasePG.PGConnection.prototype;
			this.connect(callback);
			break;
		}
		default:
		{
			throw new Error("Unsupported engine");
		}
	}
};